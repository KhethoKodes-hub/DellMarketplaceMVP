<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Dell ESD ¬∑ ICT SME Marketplace (üåì Dark/Light Toggle)</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- Bootstrap 5 + icons -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
  <style>
    /* ----- CSS variables for light/dark ----- */
    :root {
      --bg-gradient-start: #0a1929;
      --bg-gradient-end: #1d3a5c;
      --glass-bg: rgba(255, 255, 255, 0.15);
      --glass-border: rgba(255,255,255,0.2);
      --glass-hover: rgba(255,255,255,0.25);
      --text-primary: white;
      --text-secondary: rgba(255,255,255,0.7);
      --navbar-bg: rgba(10, 25, 40, 0.7);
      --card-shadow: 0 20px 40px -12px rgba(0, 20, 40, 0.45);
      --input-bg: rgba(255,255,255,0.1);
      --input-border: rgba(255,255,255,0.3);
      --table-header-bg: rgba(255,255,255,0.1);
      --table-border: rgba(255,255,255,0.15);
      --modal-bg: rgba(18, 35, 55, 0.7);
    }

    /* light theme overrides */
    [data-theme="light"] {
      --bg-gradient-start: #e4ecf7;
      --bg-gradient-end: #d1ddec;
      --glass-bg: rgba(255, 255, 255, 0.7);
      --glass-border: rgba(0, 40, 80, 0.15);
      --glass-hover: rgba(255, 255, 255, 0.9);
      --text-primary: #0a1a2b;
      --text-secondary: #1e3b5a;
      --navbar-bg: rgba(255, 255, 255, 0.7);
      --card-shadow: 0 12px 32px -12px rgba(0,60,120,0.25);
      --input-bg: rgba(255,255,255,0.8);
      --input-border: rgba(0,40,80,0.2);
      --table-header-bg: rgba(0,60,120,0.08);
      --table-border: rgba(0,40,80,0.1);
      --modal-bg: rgba(255, 255, 255, 0.85);
    }

    * {
      box-sizing: border-box;
      transition: background-color 0.25s ease, border-color 0.2s ease, color 0.2s ease;
    }

    body {
      min-height: 100vh;
      background: linear-gradient(145deg, var(--bg-gradient-start), var(--bg-gradient-end));
      font-family: 'Inter', system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      padding-bottom: 2rem;
      backdrop-attachment: fixed;
      color: var(--text-primary);
    }

    /* glassmorphism base */
    .glass-card {
      background: var(--glass-bg);
      backdrop-filter: blur(12px) saturate(180%);
      -webkit-backdrop-filter: blur(12px) saturate(180%);
      border: 1px solid var(--glass-border);
      border-radius: 32px;
      box-shadow: var(--card-shadow), 0 0 0 1px rgba(255,255,255,0.08) inset;
      transition: all 0.2s ease;
      color: var(--text-primary);
    }

    .glass-card:hover {
      background: var(--glass-hover);
      border-color: rgba(255,255,255,0.35);
      box-shadow: 0 28px 48px -16px rgba(0, 60, 120, 0.4);
      transform: translateY(-6px);
    }

    /* navbar */
    .navbar-glass {
      background: var(--navbar-bg) !important;
      backdrop-filter: blur(14px) saturate(200%);
      border-bottom: 1px solid var(--glass-border);
    }

    .navbar-brand {
      font-weight: 700;
      letter-spacing: -0.01em;
      background: linear-gradient(130deg, var(--text-primary), #8bb9ff);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    /* theme toggle button */
    .theme-toggle {
      background: rgba(128,128,128,0.2);
      backdrop-filter: blur(8px);
      border: 1px solid var(--glass-border);
      border-radius: 60px;
      padding: 0.3rem 0.9rem;
      color: var(--text-primary);
      font-size: 0.9rem;
      display: flex;
      align-items: center;
      gap: 6px;
      cursor: pointer;
      transition: 0.15s;
    }
    .theme-toggle:hover {
      background: rgba(255,255,255,0.25);
    }

    .btn-glass-outline {
      background: rgba(255,255,255,0.05);
      backdrop-filter: blur(8px);
      border: 1.5px solid var(--glass-border);
      border-radius: 40px;
      color: var(--text-primary);
      font-weight: 500;
      padding: 0.4rem 1.3rem;
      transition: 0.2s;
    }

    .btn-glass-outline:hover {
      background: rgba(255,255,255,0.25);
      border-color: rgba(255,255,255,0.8);
      color: var(--text-primary);
    }

    .btn-gradient-primary {
      background: linear-gradient(135deg, #0066cc, #004d99);
      border: none;
      border-radius: 50px;
      font-weight: 600;
      color: white;
      box-shadow: 0 10px 20px -8px #001f3f;
    }

    .btn-gradient-primary:hover {
      background: linear-gradient(135deg, #1a75d4, #005cb0);
      color: white;
    }

    .badge-glass {
      background: var(--glass-bg);
      backdrop-filter: blur(4px);
      color: var(--text-primary);
      border-radius: 60px;
      padding: 0.3rem 1rem;
      font-size: 0.75rem;
      font-weight: 500;
      border: 1px solid var(--glass-border);
    }

    .category-tag {
      background: linear-gradient(145deg, #1e4b6e, #103d5a);
      color: white;
      border-radius: 30px;
      padding: 0.25rem 1.1rem;
      font-size: 0.75rem;
      font-weight: 500;
      border: 1px solid rgba(255,255,255,0.2);
    }

    /* light theme category tag adjustment */
    [data-theme="light"] .category-tag {
      background: linear-gradient(145deg, #c1d9f0, #a6c0dd);
      color: #0a1a2b;
      border: 1px solid rgba(0,0,0,0.1);
    }

    .dashboard-stat {
      background: var(--glass-bg);
      backdrop-filter: blur(14px);
      border: 1px solid var(--glass-border);
      border-radius: 36px;
      padding: 1.5rem 1.2rem;
      transition: 0.2s;
      color: var(--text-primary);
    }

    .dashboard-stat .stat-number {
      font-size: 2.5rem;
      font-weight: 700;
      background: linear-gradient(to right, var(--text-primary), #7ca5d4);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      line-height: 1.2;
    }

    .form-control, .form-select {
      background: var(--input-bg);
      backdrop-filter: blur(8px);
      border: 1px solid var(--input-border);
      border-radius: 60px;
      color: var(--text-primary);
      padding: 0.7rem 1.2rem;
    }

    .form-control::placeholder {
      color: var(--text-secondary);
      opacity: 0.8;
    }

    .form-control:focus, .form-select:focus {
      background: var(--glass-hover);
      border-color: var(--glass-border);
      box-shadow: 0 0 0 3px rgba(0,110,255,0.2);
      color: var(--text-primary);
    }

    .form-select option {
      background: var(--bg-gradient-end);
      color: var(--text-primary);
    }

    .glass-table {
      background: var(--glass-bg);
      backdrop-filter: blur(12px);
      border-radius: 36px;
      border: 1px solid var(--glass-border);
      overflow: hidden;
    }

    .glass-table table {
      color: var(--text-primary);
      margin-bottom: 0;
    }

    .glass-table thead th {
      background: var(--table-header-bg);
      color: var(--text-primary);
      border-bottom: 1px solid var(--table-border);
    }

    .glass-table td {
      background: transparent;
      border-bottom: 1px solid var(--table-border);
      color: var(--text-secondary);
    }

    .glass-table tbody tr:hover {
      background: var(--glass-hover);
    }

    .modal-content {
      background: var(--modal-bg);
      backdrop-filter: blur(28px) saturate(200%);
      border: 1px solid var(--glass-border);
      border-radius: 48px;
      color: var(--text-primary);
    }

    .modal-header .btn-close {
      filter: invert(0.8);
      opacity: 0.8;
    }

    [data-theme="light"] .modal-header .btn-close {
      filter: invert(0.2);
    }

    .avatar-icon {
      width: 48px;
      height: 48px;
      background: linear-gradient(125deg, #2b6a9e, #184a72);
      border-radius: 24px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.5rem;
      color: white;
      border: 1px solid rgba(255,255,255,0.3);
    }

    .gradient-heading {
      background: linear-gradient(145deg, var(--text-primary), #7ca5d4);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      font-weight: 700;
    }

    hr {
      opacity: 0.2;
      background: var(--text-primary);
    }

    .text-white-50 {
      color: var(--text-secondary) !important;
    }
  </style>
</head>
<body data-theme="dark"> <!-- default dark -->

<!-- glass navbar with theme toggle -->
<nav class="navbar navbar-expand-lg navbar-glass sticky-top">
  <div class="container">
    <a class="navbar-brand fs-3" href="#">
      <i class="bi bi-droplet-half me-2" style="color: #7abfff;"></i>
      Dell ESD <span style="font-weight:300; background:none; -webkit-text-fill-color:currentColor; color:currentColor;">|</span> 
      <span class="gradient-heading">ICT SME Marketplace</span>
    </a>
    <div class="d-flex gap-2">
      <!-- theme toggle pill -->
      <div class="theme-toggle" id="themeToggle" onclick="toggleTheme()">
        <i class="bi bi-sun-fill" id="themeIconSun" style="display: none;"></i>
        <i class="bi bi-moon-stars-fill" id="themeIconMoon"></i>
        <span id="themeLabel">Dark</span>
      </div>
      <button class="btn btn-glass-outline me-2" onclick="showMarketplace()">
        <i class="bi bi-shop me-1"></i>Marketplace
      </button>
      <button class="btn btn-glass-outline" onclick="showDashboard()">
        <i class="bi bi-bar-chart-steps me-1"></i>Impact Dashboard
      </button>
    </div>
  </div>
</nav>

<!-- marketplace section -->
<div class="container my-4" id="marketplaceSection">
  <div class="d-flex align-items-center justify-content-between mb-4">
    <h2 class="gradient-heading"><i class="bi bi-buildings me-2"></i>ICT SME Directory</h2>
    <span class="badge-glass"><i class="bi bi-people-fill me-1"></i> 10 verified SMEs</span>
  </div>

  <!-- search & filter row -->
  <div class="row g-3 mb-4 align-items-center">
    <div class="col-md-5">
      <div class="input-group">
        <span class="input-group-text bg-transparent border-end-0 rounded-start-5" style="border-color:var(--glass-border); background:var(--input-bg)!important;">
          <i class="bi bi-search" style="color:var(--text-primary);"></i>
        </span>
        <input type="text" id="searchInput" class="form-control border-start-0 rounded-end-5" placeholder="Search by name, service or category..." onkeyup="renderSMEs()">
      </div>
    </div>
    <div class="col-md-4">
      <select id="categoryFilter" class="form-select" onchange="renderSMEs()">
        <option value="">All categories</option>
        <option value="Cybersecurity">üîê Cybersecurity</option>
        <option value="Network Cabling">üîå Network Cabling</option>
        <option value="AI Services">ü§ñ AI Services</option>
        <option value="Cloud Solutions">‚òÅÔ∏è Cloud Solutions</option>
        <option value="IoT & Hardware">üì° IoT & Hardware</option>
        <option value="Consulting">üìä IT Consulting</option>
      </select>
    </div>
    <div class="col-md-3 text-md-end">
      <span class="badge-glass"><i class="bi bi-funnel me-1"></i> <span id="resultCount">10</span> partners</span>
    </div>
  </div>

  <!-- SME cards grid -->
  <div class="row g-4" id="smeList"></div>
</div>

<!-- dashboard section -->
<div class="container my-4 d-none" id="dashboardSection">
  <div class="d-flex align-items-center gap-3 mb-4">
    <i class="bi bi-speedometer2 fs-1" style="color: var(--text-primary);"></i>
    <h2 class="gradient-heading">Impact & Analytics Dashboard</h2>
  </div>

  <!-- KPI cards -->
  <div class="row g-4 my-2">
    <div class="col-md-3">
      <div class="dashboard-stat d-flex align-items-center">
        <div class="avatar-icon me-3"><i class="bi bi-people fs-4"></i></div>
        <div>
          <div class="stat-label text-white-50">TOTAL SMEs</div>
          <div class="stat-number" id="totalSMEs">10</div>
        </div>
      </div>
    </div>
    <div class="col-md-3">
      <div class="dashboard-stat d-flex align-items-center">
        <div class="avatar-icon me-3"><i class="bi bi-chat-left-dots fs-4"></i></div>
        <div>
          <div class="stat-label text-white-50">LEADS GENERATED</div>
          <div class="stat-number" id="totalLeads">9</div>
        </div>
      </div>
    </div>
    <div class="col-md-3">
      <div class="dashboard-stat d-flex align-items-center">
        <div class="avatar-icon me-3"><i class="bi bi-trophy fs-4"></i></div>
        <div>
          <div class="stat-label text-white-50">TOP PERFORMER</div>
          <div class="h5 fw-bold mt-1 text-primary" id="topSME" style="color:var(--text-primary)!important;">AI Nexus</div>
        </div>
      </div>
    </div>
    <div class="col-md-3">
      <div class="dashboard-stat d-flex align-items-center">
        <div class="avatar-icon me-3"><i class="bi bi-cash-stack fs-4"></i></div>
        <div>
          <div class="stat-label text-white-50">EST. REVENUE IMPACT</div>
          <div class="h5 fw-bold mt-1" style="color:var(--text-primary);">R2.8M <small style="font-size:0.7rem;">(Q2)</small></div>
        </div>
      </div>
    </div>
  </div>

  <!-- lead table -->
  <div class="row mt-5">
    <div class="col-12">
      <div class="d-flex align-items-center mb-3">
        <i class="bi bi-envelope-paper fs-3 me-2" style="color:var(--text-primary);"></i>
        <h4 class="fw-semibold" style="color:var(--text-primary);">Latest buyer inquiries</h4>
        <span class="ms-auto badge-glass"><i class="bi bi-megaphone"></i> 9 new this month</span>
      </div>
      <div class="glass-table p-2">
        <table class="table table-hover align-middle">
          <thead>
            <tr><th>SME</th><th>Company</th><th>Email</th><th>Message</th><th>Status</th></tr>
          </thead>
          <tbody id="leadTable"></tbody>
        </table>
      </div>
    </div>
  </div>
</div>

<!-- profile modal -->
<div class="modal fade" id="smeModal" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header border-0 pb-0">
        <h5 class="modal-title gradient-heading" id="modalTitle"></h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
      </div>
      <div class="modal-body pt-2">
        <div class="d-flex align-items-center gap-2 mb-3">
          <span class="category-tag" id="modalCategory"></span>
          <span class="badge-glass"><i class="bi bi-briefcase"></i> <span id="modalLeads">0</span> previous leads</span>
        </div>
        <p class="text-white-50" id="modalDescription"></p>
        <div class="bg-white-10 p-3 rounded-4 mb-3" style="background:rgba(128,128,128,0.1); border:1px solid var(--glass-border);">
          <i class="bi bi-tools me-1"></i>
          <strong class="text-primary" style="color:var(--text-primary)!important;">Core services:</strong> <span class="text-white-50" id="modalServices"></span>
        </div>
        <hr>
        <h6 class="fw-bold" style="color:var(--text-primary);"><i class="bi bi-send"></i> Send inquiry</h6>
        <input type="text" id="leadCompany" class="form-control mb-2" placeholder="Your company name *">
        <input type="email" id="leadEmail" class="form-control mb-2" placeholder="Email address *">
        <textarea id="leadMessage" class="form-control mb-3" rows="2" placeholder="Tell them about your project..."></textarea>
        <button class="btn btn-gradient-primary w-100 py-2" onclick="submitLead()"><i class="bi bi-envelope-arrow-up me-2"></i>Submit inquiry</button>
      </div>
    </div>
  </div>
</div>

<!-- Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
<script>
  // ---------- ENHANCED MOCK DATA (10 SMEs) ----------
  const smes = [
    { id: 1, name: "SecureNet Solutions", category: "Cybersecurity", description: "Penetration testing, 24/7 SOC, and risk management for financial institutions.", services: "Pen Testing, Firewall, SOC monitoring, ISO27001 gap analysis", leads: 2, caseStudies: "Prevented $3M breach for bank", location: "Nairobi" },
    { id: 2, name: "CableTech Installations", category: "Network Cabling", description: "Structured cabling & fiber infrastructure for enterprise campuses and data centers.", services: "LAN cabling, server rooms, fiber splicing, WiFi design", leads: 1, caseStudies: "MTN headquarters cabling", location: "Johannesburg" },
    { id: 3, name: "AI Nexus Africa", category: "AI Services", description: "Custom generative AI, LLM chatbots, and computer vision for retail & logistics.", services: "Chatbots, document automation, demand forecasting", leads: 3, caseStudies: "Chatbot for 200k customers", location: "Cape Town" },
    { id: 4, name: "CloudScale Systems", category: "Cloud Solutions", description: "Cloud-native consulting: AWS, Azure, Kubernetes, and FinOps.", services: "Azure migration, EKS, DevOps, cost optimisation", leads: 0, caseStudies: "40% cloud cost reduction", location: "Lagos" },
    { id: 5, name: "IoT Dynamics", category: "IoT & Hardware", description: "Industrial IoT, asset tracking, and sensor deployment for mining/agriculture.", services: "Smart sensors, LoRaWAN, predictive maintenance", leads: 1, caseStudies: "Gold mine predictive system", location: "Accra" },
    { id: 6, name: "Cyber Defense Africa", category: "Cybersecurity", description: "Offensive security and compliance for SME (POPIA/GDPR).", services: "Red teaming, awareness training, DLP", leads: 0, caseStudies: "Secured 5 healthcare orgs", location: "Durban" },
    { id: 7, name: "FiberLink Pros", category: "Network Cabling", description: "FTTH, backbone cabling and wireless backhaul.", services: "Outdoor/indoor fiber, ODF, splicing", leads: 1, caseStudies: "200km rural fiber project", location: "Kigali" },
    { id: 8, name: "Intellisys AI", category: "AI Services", description: "ML model development, computer vision, and predictive analytics.", services: "Vision inspection, predictive models, AI training", leads: 0, caseStudies: "Factory quality control AI", location: "Nairobi" },
    { id: 9, name: "Bridge 2 Cloud", category: "Cloud Solutions", description: "Multi-cloud managed services and infrastructure-as-code.", services: "Terraform, cloud migrations, landing zones", leads: 1, caseStudies: "Migrated 500 servers", location: "Lagos" },
    { id: 10, name: "Strat IT Consulting", category: "Consulting", description: "Strategic IT sourcing, digital transformation for public sector.", services: "IT strategy, tender support, ICT auditing", leads: 0, caseStudies: "eGov framework design", location: "Gaborone" }
  ];

  // leads array (mock + future)
  let leads = [
    { sme: "AI Nexus Africa", company: "Barclays Kenya", email: "purchasing@barclays.co.ke", message: "Interested in chatbot for WhatsApp banking" },
    { sme: "SecureNet Solutions", company: "Equity Group", email: "cio@equitybank.co", message: "Need full infrastructure pen test Q3" },
    { sme: "IoT Dynamics", company: "AngloGold", email: "tech@anglogold.com", message: "Asset tracking trial for 5 trucks" },
    { sme: "CableTech Installations", company: "Liquid Telecom", email: "projects@liquid.tech", message: "Looking for data center cabling partner" },
    { sme: "FiberLink Pros", company: "Airtel Uganda", email: "network@airtel.ug", message: "Last-mile fiber in Kampala" },
    { sme: "SecureNet Solutions", company: "KCB Bank", email: "security@kcbgroup.com", message: "SOC monitoring expansion" },
    { sme: "Bridge 2 Cloud", company: "Safaricom PLC", email: "cloud@safaricom.co.ke", message: "AWS landing zone setup" },
    { sme: "AI Nexus Africa", company: "Twiga Foods", email: "it@twigafoods.com", message: "Demand forecasting pilot" },
    { sme: "CloudScale Systems", company: "Old Mutual", email: "infra@oldmutual.com", message: "Azure governance assessment" } 
  ];

  smes.forEach(s => {
    s.leads = leads.filter(l => l.sme === s.name).length;
  });

  let selectedSME = null;

  // theme toggle function
  function toggleTheme() {
    const body = document.body;
    const currentTheme = body.getAttribute('data-theme');
    const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
    body.setAttribute('data-theme', newTheme);
    
    // update toggle icon & label
    const sunIcon = document.getElementById('themeIconSun');
    const moonIcon = document.getElementById('themeIconMoon');
    const label = document.getElementById('themeLabel');
    if (newTheme === 'light') {
      sunIcon.style.display = 'inline-block';
      moonIcon.style.display = 'none';
      label.innerText = 'Light';
    } else {
      sunIcon.style.display = 'none';
      moonIcon.style.display = 'inline-block';
      label.innerText = 'Dark';
    }
  }

  // Render marketplace cards
  function renderSMEs() {
    const search = document.getElementById("searchInput").value.toLowerCase();
    const category = document.getElementById("categoryFilter").value;
    const container = document.getElementById("smeList");
    container.innerHTML = "";

    const filtered = smes.filter(sme =>
      (sme.name.toLowerCase().includes(search) ||
       sme.services.toLowerCase().includes(search) ||
       sme.category.toLowerCase().includes(search)) &&
      (category === "" || sme.category === category)
    );
    document.getElementById("resultCount").innerText = filtered.length;

    filtered.forEach(sme => {
      container.innerHTML += `
        <div class="col-md-6 col-lg-4">
          <div class="glass-card p-3 h-100 d-flex flex-column">
            <div class="d-flex align-items-center gap-3 mb-2">
              <div class="avatar-icon"><i class="bi bi-shield-shaded fs-4"></i></div>
              <div>
                <h5 class="fw-bold mb-0" style="color:var(--text-primary);">${sme.name}</h5>
                <span class="category-tag mt-1">${sme.category}</span>
              </div>
            </div>
            <p class="text-white-50 small">${sme.description.substring(0,75)}‚Ä¶</p>
            <div class="d-flex justify-content-between align-items-center mt-auto">
              <span class="badge-glass"><i class="bi bi-geo-alt"></i> ${sme.location}</span>
              <span class="badge-glass"><i class="bi bi-briefcase"></i> ${sme.leads} leads</span>
            </div>
            <button class="btn btn-gradient-primary w-100 mt-3" onclick="openSME(${sme.id})">
              <i class="bi bi-person-lines-fill me-2"></i>View profile & connect
            </button>
          </div>
        </div>
      `;
    });
  }

  function openSME(id) {
    selectedSME = smes.find(s => s.id === id);
    document.getElementById("modalTitle").innerText = selectedSME.name;
    document.getElementById("modalCategory").innerText = selectedSME.category;
    document.getElementById("modalLeads").innerText = selectedSME.leads;
    document.getElementById("modalDescription").innerText = selectedSME.description;
    document.getElementById("modalServices").innerText = selectedSME.services;
    document.getElementById("leadCompany").value = "";
    document.getElementById("leadEmail").value = "";
    document.getElementById("leadMessage").value = "";
    new bootstrap.Modal(document.getElementById("smeModal")).show();
  }

  function submitLead() {
    const company = document.getElementById("leadCompany").value.trim();
    const email = document.getElementById("leadEmail").value.trim();
    const message = document.getElementById("leadMessage").value.trim();

    if (!company || !email || !message) {
      alert("Please fill in all fields");
      return;
    }

    leads.push({
      sme: selectedSME.name,
      company,
      email,
      message
    });

    selectedSME.leads++;
    alert("‚úì Inquiry submitted! The SME will reach out soon.");
    bootstrap.Modal.getInstance(document.getElementById("smeModal")).hide();
    renderDashboard();
    renderSMEs();
  }

  function showMarketplace() {
    document.getElementById("marketplaceSection").classList.remove("d-none");
    document.getElementById("dashboardSection").classList.add("d-none");
  }

  function showDashboard() {
    document.getElementById("marketplaceSection").classList.add("d-none");
    document.getElementById("dashboardSection").classList.remove("d-none");
    renderDashboard();
  }

  function renderDashboard() {
    const totalSMEs = smes.length;
    const totalLeads = leads.length;
    document.getElementById("totalSMEs").innerText = totalSMEs;
    document.getElementById("totalLeads").innerText = totalLeads;

    const top = smes.reduce((prev, current) => (prev.leads > current.leads) ? prev : current, smes[0]);
    document.getElementById("topSME").innerHTML = `${top.name} <span style="font-size:0.8rem;">(${top.leads} leads)</span>`;

    const table = document.getElementById("leadTable");
    table.innerHTML = "";
    leads.slice(0,8).forEach(l => {
      table.innerHTML += `
        <tr>
          <td><span class="fw-semibold" style="color:var(--text-primary);">${l.sme}</span></td>
          <td class="text-white-50">${l.company}</td>
          <td class="text-white-50">${l.email}</td>
          <td class="text-white-50">${l.message.substring(0,45)}${l.message.length>45?'‚Ä¶':''}</td>
          <td><span class="badge bg-success bg-opacity-25 text-white px-3 py-1 rounded-pill border border-light">new</span></td>
        </tr>
      `;
    });
  }

  // initial render & set default theme icon
  window.onload = function() {
    renderSMEs();
    // ensure icons match default dark
    document.getElementById('themeIconSun').style.display = 'none';
    document.getElementById('themeIconMoon').style.display = 'inline-block';
    document.getElementById('themeLabel').innerText = 'Dark';
  };

  // expose functions
  window.toggleTheme = toggleTheme;
  window.renderSMEs = renderSMEs;
  window.openSME = openSME;
  window.submitLead = submitLead;
  window.showMarketplace = showMarketplace;
  window.showDashboard = showDashboard;
  window.renderDashboard = renderDashboard;
</script>

<!-- footer -->
<div class="container text-center text-white-50 small mt-5 pt-2">
  <i class="bi bi-droplet"></i> Dell ESD ICT SME Marketplace ‚Äì toggle between dark & light
</div>
</body>
</html>